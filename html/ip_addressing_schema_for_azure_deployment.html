<a href='../index.html'>Back to topics</a><style> #notes_table {	font-family: arial, sans-serif; border-collapse: collapse;  width: 100%; background-color: #ffffff;	color:black;}#notes_table td, #notes_table th { text-align: left; padding: 8px; border: 1px solid #808080;}#notes_table tr:nth-child(even) {background-color: white;}#notes_table tr:hover {	background-color:  #ffffff;}#notes_table tr > th {	background: #f8f8f8; color: black;}</style><table  id='notes_table'><tr align= left><th>IP Addressing Schema for Azure Deployment</th></ul></td></tr><td><ul><li>To integrate resources in an Azure virtual network with resources in your on-premises network, you must understand how you can connect those resources and how to configure IP addresses.</li><tr align= left><th>On-premises IP addressing</th></ul></td></tr><td><ul><li>It includes Routers, Firewalls, Switches, Network segmentation</li><li>There are three ranges of non-routable IP addresses that are designed for internal networks that won't be sent over internet routers</li><li>they are=>10.0.0.0 to 10.255.255.255, 172.16.0.0 to 172.31.255.255, 192.168.0.0 to 192.168.255.255</li><li>The number of subnets and IP addresses you can have in your on-premises network depends on the Classless Inter-Domain Routing (CIDR) for the IP address block.</li><tr align= left><th>Azure IP addressing</th></ul></td></tr><td><ul><li>Azure virtual networks use private IP addresses. The ranges of private IP addresses are the same as for on-premises IP addressing.</li><li>Like on-premises networks, the administrator has full control over the IP address assignment, name resolution, security settings, and security rules in an Azure virtual network.</li><li>The administrator can add or remove subnets depending on the CIDR for the IP address block.</li><tr align= left><th>In a typical Azure network design, we usually have these components</th></ul></td></tr><td><ul><li>Virtual networks, Subnets, NSGs, Firewalls, Load balancers</li><li>The Azure network does not follow the typical on-premises hierarchical network design.</li><li>The Azure network provides the ability to scale up and scale down infrastructure based on demand.</li><li>Provisioning in the Azure network happens in a matter of seconds.</li><li>There are no hardware devices, like routers or switches. The entire infrastructure is virtual, and you can slice it into chunks that suit your requirements.</li><li>In Azure, you typically would implement a network security group and a firewall. You'd use subnets to isolate front-end services, including web servers and DNS, and back-end services like databases and storage systems</li><tr align= left><th>Basic properties of Az Vnets</th></ul></td></tr><td><ul><li>By default, all subnets in an Azure virtual network can communicate with each other. However, you can use a network security group to deny communication between subnets</li><li>The smallest subnet that is supported uses a /29 subnet mask.</li><li>The largest supported subnet uses a /2 subnet mask.</li><tr align= left><th>Integrate Azure with on-premises networks</th></ul></td></tr><td><ul><li>It is vital to check for overlaps when you're planning an IP address scheme. If there's an overlap of IP addresses, you can't integrate your on-premises network with your Azure network.</li><tr align= left><th>Public and private IP addressing in Azure</th></ul></td></tr><td><ul><li>Both types of IP addresses can be allocated in Dynamic or static ways</li><li>A public IP address(static or dynamic) can be assigned to a VM, an internet-facing load balancer, a VPN gateway, or an application gateway.</li><li>The dynamic IP address is allocated when you create or start a VM. The IP address is released when you stop or delete the VM</li><li>In each Azure region, public IP addresses are assigned from a unique pool of addresses. The default allocation method is dynamic.</li><li>Static public IP addresses are assigned addresses that won't change over the lifespan of the Azure resource. Set allocation method to static</li><li>For public ip addresses, both Basic and Standard SKUs have default inbound originated flow indle time out of 4min adjustable to 30min AND have fixed outbound originated flow idle timeuot of 4min</li><li>By default, Basic SKU IP addresses are open, available for inbound only traffic and when using instane metta data service, no availability zones and no ruting preferences support</li><li>By default, Standard SKU IP addresses always use static allocation, secure and thus closed to inbound traffic. inbound traffic to be enabled by NSG, Zone-redundant;optionally zonal, can be assigned to netw interfaces, std publid load balancrs, app gateways or vpn gatewyas</li><li>Standard SKU Ip addresses can be used as anycast frontend IPs for cross-region load balancers</li><tr align= left><th>Public IP addresses prefix</th></ul></td></tr><td><ul><li>The benefit of a public IP address prefix is that you can specify firewall rules for a known range of IP addresses.</li><li>If your business needs to have datacenters in different regions, you need a different public IP address range for each region</li><li>You can create a public IP address prefix by specifying a name and prefix size. The prefix size is the number of reserved addresses available for use</li><li>You can use technology like Azure Traffic Manager to balance region-specific instances.</li><li>You can't bring your own public IP addresses from on-premises networks into Azure.</li><li>You can't specify addresses when you create a prefix; they're assigned by Azure</li><li>Public IP addresses can't be moved between regions; all IP addresses are region-specific.</li><tr align= left><th>Private IP addresses</th></ul></td></tr><td><ul><li>Private IP addresses are used for communication within an Azure Virtual Network, including virtual networks and your on-premises networks.</li><li>Private IP addresses can be set to dynamic (DHCP lease) or static (DHCP reservation).</li><li>Dynamic private IP addresses are assigned through a DHCP lease</li><li>Static private IP addresses are assigned through a DHCP reservation</li><tr align= left><th>IP addressing for Azure virtual networks</th></ul></td></tr><td><ul><li>In Azure, a virtual network is a fundamental component that acts as an organization's network</li><li>The administrator has full control over IP address assignment, security settings, and security rules.</li><li>You choose the private IP addresses that are reserved by Internet Assigned Numbers Authority (IANA) based on your network requirements as</li><li>10.0.0.0/8, 172.16.0.0.0/12,192.168.0.0/16</li><li>Each subnet must have a unique address range, which is specified in classless interdomain routing (CIDR) format. CIDR is a way to represent a block of network IP addresses. An IPv4 CIDR, specified as part of the IP address, shows the length of the network prefix.</li><li>for example, CIDR 192.168.10.0/24. "192.168.10.0" is the network address, and "24" indicates that the first 24 bits are part of the network address, leaving the last 8 bits for specific host addresses. The address range of a subnet can't overlap with other subnets in the virtual network or with the on-premises network.</li><li>In Azure virtual networks, IP addresses can be allocated to the following types of resources</li><li>1. Virtual machine network interfaces</li><li>2. Load balancers</li><li>3. Application gateways</li><tr align= left><th>Check</th></ul></td></tr><td><ul><li>What must a virtual machine have to communicate with the other resources in the same virtual network? ==> Network interface</li><li>Which of the following resources can you assign a public IP address to? ==> a VM</li><tr align= left><th>Exercise</th></ul></td></tr><td><ul><li>az network vnet create --resource-group learn-3621fa54-02ae-4e73-8a04-6a02fc7327c1 --name CoreServicesVnet --address-prefixes 10.20.0.0/16 --location westus</li><li>az network vnet subnet create --resource-group learn-3621fa54-02ae-4e73-8a04-6a02fc7327c1 --vnet-name CoreServicesVnet --name GatewaySubnet --address-prefixes 10.20.0.0/27</li><li>Repeat above for all subnets under the vnet</li><li>List all subnets=> az network vnet subnet list --resource-group learn-3621fa54-02ae-4e73-8a04-6a02fc7327c1 --vnet-name CoreServicesVnet --output table</li><li>Continue this to do vnet peering and more. refer to ms docs</li></table><a href='../index.html'>Back to topics</a>