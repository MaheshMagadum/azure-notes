<a href='../index.html'>Back to topics</a><style> #notes_table {	font-family: arial, sans-serif; border-collapse: collapse;  width: 100%; background-color: #ffffff;	color:black;}#notes_table td, #notes_table th { text-align: left; padding: 8px; border: 1px solid #808080;}#notes_table tr:nth-child(even) {background-color: white;}#notes_table tr:hover {	background-color:  #ffffff;}#notes_table tr > th {	background: #f8f8f8; color: black;}</style><table  id='notes_table'><tr align= left><th>Introduction</th></ul></td></tr><td><ul><li>Many applications need to be resilient to failure and scale easily when demand increases.</li><li>Administrators can address these requirements by using Azure Load Balancer.</li><li>A load balancer is implemented by using load-balancing rules and health probes.</li><li>Azure Load Balancer can be used for inbound and outbound scenarios.</li><li>You can implement a public or internal load balancer, or use both types in a combination configuration</li><li>To implement a load balancer, you configure four components</li><li>1. Front-end IP configuration => specifies the public IP or internal IP that your load balancer responds to.</li><li>2. Back-end pools => are your services and resources, including Azure Virtual Machines or instances in Azure Virtual Machine Scale Sets.</li><li>3. Health probes => ensure the resources in the backend are healthy</li><li>4. Load-balancing rules => determine how traffic is distributed to back-end resources.</li><li>Load Balancer scales up to millions of TCP and UDP application flows</li><tr align= left><th>Implement a public load balancer</th></ul></td></tr><td><ul><li>Consider a scenario where internet traffic attempts to reach virtual machines in a web tier subnet that implements a public load balancer. Internet clients send webpage requests to the public IP address of a web app on TCP port 80. Azure Load Balancer intercepts the traffic and distributes the requests across the virtual machines in the load-balanced set according to the defined load-balancing rules.</li><tr align= left><th>Implement an internal load balancer</th></ul></td></tr><td><ul><li>Administrators use internal load balancers to direct traffic to resources that reside in a virtual network, or to resources that use a VPN to access Azure infrastructure</li><li>ex => he internal load balancer receives the database requests and uses the load-balancing rules to determine how to distribute the requests to the back-end SQL servers. The SQL servers respond on port 1433.</li><tr align= left><th>Things to consider when using an internal load balancer</th></ul></td></tr><td><ul><li>Within virtual network => Establish load balancing from your virtual machines in the virtual network to a set of virtual machines that reside within the same virtual network.</li><li>For cross-premises virtual network => Apply load balancing from your on-premises computers to a set of virtual machines that reside within the same virtual network</li><li>For multi-tier applications => Implement load balancing for your internet-facing multi-tier applications when the back-end tiers aren't internet-facing. The back-end tiers require traffic load-balancing from the internet-facing tier</li><li>For line-of-business applications => Add load balancing for your line-of-business applications hosted in Azure without having to add other load balancer hardware or software. This scenario includes on-premises servers that are in the set of computers whose traffic is load-balanced.</li><li>With public load balancer => Configure a public load balancer in front of your internal load balancer to create a multi-tier application</li><tr align= left><th>Load balancer SKUs</th></ul></td></tr><td><ul><li>Azure Load Balancer supports three SKU options => Basic, Standard, and Gateway. Each SKU provides different features, scenario scaling, and pricing.</li><li>Standard Load Balancer is the newest product. It's essentially a superset of Basic Load Balancer.</li><li>he Standard SKU offers an expanded and more granular feature set than the Basic SKU.</li><li>The Basic SKU can be upgraded to the Standard SKU. But, new designs and architectures should use the Standard SKU.</li><li>The Gateway SKU supports high performance and high availability scenarios with third-party network virtual appliances (NVAs).</li><tr align= left><th>Compare Basic and Standard SKU features</th></ul></td></tr><td><ul><li>Basic SKU=>Back-end pools ~300 instances, Standrd SKU ~ 1k instances</li><li>Basic SKU=>Health probes (HTTP, TCP), Standrd (HTTPS, HTTP, TCP)</li><li>Basic SKU=>Availability Zones (not available), Standard (Zone redundant & zonal frontends)</li><li>Basic SKU=>Multiple frontends (inbound only), Standard (inbound and outbond)</li><li>Basic SKU=>Securiy (open by default), Standard (closed to inbound unless allowed by NSG), internal traffic from vnet to internet load balancer allowed</li><tr align= left><th>Create back-end pools</th></ul></td></tr><td><ul><li>When you configure the back-end pools, you can connect to availability sets, virtual machines, or Azure Virtual Machine Scale Sets.</li><li>For the Basic SKU, you can select virtual machines in a single availability set or virtual machines in an instance of Azure Virtual Machine Scale Sets.</li><li>For the Standard SKU, you can select virtual machines or Virtual Machine Scale Sets in a single virtual network.  Your configuration can include a combination of virtual machines, availability sets, and Virtual Machine Scale Sets.</li><tr align= left><th>Create health probes</th></ul></td></tr><td><ul><li>A health probe allows your load balancer to monitor the status of your application. The probe dynamically adds or removes virtual machines from your load balancer rotation based on the machine response to health checks</li><li>In an HTTP probe, the load balancer probes your back-end pool endpoints every 15 seconds</li><li>A TCP probe relies on establishing a successful TCP session to a defined probe port.</li><li>To configure a probe, you specify values for Port, URI,Interval, Unhealthy threshold</li><tr align= left><th>Create load balancer rules</th></ul></td></tr><td><ul><li>You can define load-balancing rules to specify how traffic is distributed to your back-end pools. Each rule maps a front-end IP address and port combination to a set of back-end IP address and port combinations.</li><li>By default, Azure Load Balancer distributes network traffic equally among multiple virtual machines.</li><li>To define rules, you configure, IP version, Front-end IP address, port and protocl, Backend pools and back-end port, Health probe, Session persistance</li><li>Session persistence specifies how to handle traffic from a client. By default, successive requests from a client are handled by any virtual machine in your pool.</li><li>you can modify session persistence behavior as None(default), Client IP, Client IP and protocol</li><li>Maintaining session persistence information is important for applications that implement a shopping cart. Can you think of other applications that might benefit from session persistence?</li><li>Load-balancing rules can be used in combination with NAT rules.</li><li>By combining your NAT rule with load-balancing rules, you can enable remote desktop access from outside of Azure. A scenario where you use NAT from a load balancer's public address to TCP port 3389 on a specific virtual machine</li><tr align= left><th>Do this exercise practically</th></ul></td></tr><td><ul><li>https://learn.microsoft.com/en-us/training/modules/configure-azure-load-balancer/9-simulation-load-balancer</li><tr align= left><th>Check</th></ul></td></tr><td><ul><li>What's the default distribution type for traffic through a load balancer? => Five-tuple hash</li><li>Which configuration is required for an internal load balancer? => Virtual machines must be in the same virtual network.</li></table><a href='../index.html'>Back to topics</a>