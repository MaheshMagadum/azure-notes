<a href='../index.html'>Back to topics</a><style> #notes_table {	font-family: arial, sans-serif; border-collapse: collapse;  width: 100%; background-color: #ffffff;	color:black;}#notes_table td, #notes_table th { text-align: left; padding: 8px; border: 1px solid #808080;}#notes_table tr:nth-child(even) {background-color: white;}#notes_table tr:hover {	background-color:  #ffffff;}#notes_table tr > th {	background: #f8f8f8; color: black;}</style><table  id='notes_table'><tr align= left><th>Azure Files</th></ul></td></tr><td><ul><li>Azure Files offers fully managed file shares in the cloud that are accessible via industry standard protocols.</li><li>Azure Files stores data as true directory objects in file shares.</li><li>Azure Files provides shared access to files across multiple virtual machines</li><li>Applications that run in Azure Virtual Machines or cloud services can mount an Azure Files storage share</li><li>accessible via SMB</li><li>Consider replacement and supplement options</li><li>Consider global access. Directly access Azure Files shares by using most operating systems, such as Windows, macOS, and Linux from anywhere in the world</li><li>Consider lift and shift support.</li><li>Consider the Azure File Sync agent. Replicate Azure Files shares to Windows Servers by using the Azure File Sync agent.</li><li>Consider shared applications. Store shared application settings in Azure Files, such as configuration files.</li><li>Consider diagnostic data.</li><li>Use Azure Files to store diagnostic data such as logs, metrics, and crash dumps in a shared location.</li><li>Map Azure Files share on Windows</li><li>Mount Azure Files share on Linux</li><tr align= left><th>Manage Azure Files shares</th></ul></td></tr><td><ul><li>Open port 445. SMB communicates over TCP port 445. Also, make sure your firewall isn't blocking TCP port 445 from the client machine.</li><li>Enable secure transfer.</li><tr align= left><th>Create file share snapshots</th></ul></td></tr><td><ul><li>The Azure Files share snapshot capability is provided at the file share level.</li><li>Share snapshots are incremental in nature. Only data changed since the most recent share snapshot is saved.</li><li>Incremental snapshots minimize the time required to create share snapshots and saves on storage costs.</li><li>You can retrieve a share snapshot for an individual file. This level of support helps with restoring individual files rather than having to restore to the entire file share.</li><li>If you want to delete a share that has share snapshots, you must first delete all of its' snapshots.</li><li>{'Protect against application error and data corruption': 'Take a snapshot before write - ex'}</li><li>Protect against accidental deletions or unintended changes. ex below</li><li>Imagine you're working on a text file in a file share. After the text file is closed, you lose the ability to undo your changes.</li><li>You can use share snapshots to recover previous versions of the file if it's accidentally renamed or deleted.</li><li>Support backup and recovery. After you create a file share, you can periodically create a snapshot of the file share to use it for data backu</li><tr align= left><th>Implement Azure File Sync (Cache)</th></ul></td></tr><td><ul><li>Azure File Sync enables you to cache several Azure Files shares on an on-premises Windows Server or cloud virtual machine.</li><li>You can use Azure File Sync to centralize your organization's file shares in Azure Files</li><li>Azure File Sync transforms Windows Server into a quick cache of your Azure Files shares.</li><li>You can use any protocol that's available on Windows Server to access your data locally with Azure File Sync, including SMB, NFS, and FTPS.</li><li>Azure File Sync supports as many caches as you need around the world</li><li>Cloud tiering is an optional feature of Azure File Sync.</li><li>When a file is tiered, Azure File Sync replaces the file locally with a pointer.</li><li>When a user opens a tiered file, Azure File Sync seamlessly recalls the file data from Azure Files without the user needing to know that the file is stored in Azure.</li><tr align= left><th>Notes</th></ul></td></tr><td><ul><li>Consider application lift and shift. Use Azure File Sync to move applications that require access between Azure and on-premises systems.</li><li>Consider support for branch offices</li><li>Consider backup and disaster recovery.</li><li>Azure Backup backs up your on-premises data. Restore file metadata immediately and recall data as needed for rapid disaster recovery.</li><li>Consider file archiving with cloud tiering.</li><li>Azure File Sync stores only recently accessed data on local servers.</li><li>Implement cloud tiering so non-used data moves to Azure Files.</li><tr align= left><th>Identify Azure File Sync components</th></ul></td></tr><td><ul><li>Azure File Sync is composed of four main components that work together to provide caching for Azure Files shares on an on-premises Windows Server or cloud virtual machine.</li><tr align= left><th>Storage Sync Service</th></ul></td></tr><td><ul><li>The Storage Sync Service is the top-level Azure resource for Azure File Sync</li><li>The Storage Sync Service forms sync relationships with multiple storage accounts by using multiple sync groups.</li><li>The service requires a distinct top-level resource from the storage account resource to support the sync relationships</li><li>A subscription can have multiple Storage Sync Service resources deployed.</li><tr align= left><th>Sync group</th></ul></td></tr><td><ul><li>A sync group defines the sync topology for a set of files. Endpoints within a sync group are kept in sync with each oth</li><li>An instance of the Storage Sync Service can host as many sync groups as you need.</li><tr align= left><th>Registered server</th></ul></td></tr><td><ul><li>The registered server object represents a trust relationship between your server (or cluster) and the Storage Sync Service resource.</li><tr align= left><th>Azure File Sync agent</th></ul></td></tr><td><ul><li>The Azure File Sync agent is a downloadable package that enables Windows Server to be synced with an Azure Files share.</li><li>FileSyncSvc.exe ==> This file is the background Windows service that's responsible for monitoring changes on server endpoints, and for initiating sync sessions to Azure.</li><li>StorageSync.sys ==> This file is the Azure File Sync file system filter that supports cloud tiering</li><li>PowerShell cmdlets ==> These PowerShell management cmdlets allow you to interact with the Microsoft.StorageSync Azure resource provider</li><li>You can find the cmdlets at the following (default) locations</li><li>C:\\Program Files\\Azure\\StorageSyncAgent\\StorageSync.Management.PowerShell.Cmdlets.dll</li><li>C:\\Program Files\\Azure\\StorageSyncAgent\\StorageSync.Management.ServerCmdlets.dll</li><tr align= left><th>Server endpoint</th></ul></td></tr><td><ul><li>A server endpoint represents a specific location on a registered server, such as a folder on a server volume</li><tr align= left><th>Cloud endpoint</th></ul></td></tr><td><ul><li>A cloud endpoint is an Azure Files share that's part of a sync group</li><li>An Azure Files share can be a member of one cloud endpoint only.</li><li>An Azure Files share can be a member of one sync group only.</li><tr align= left><th>Deploy Azure File Sync</th></ul></td></tr><td><ul><li>1. Deploy Storage Sync service</li><li>2. Prepare Windows server(s)</li><li>3. Install Azure File Sync Agent</li><li>4. Register Windows server(s)</li><tr align= left><th>More(sandbox)</th></ul></td></tr><td><ul><li>https://learn.microsoft.com/en-us/training/modules/extend-share-capacity-with-azure-file-sync/</li></table><a href='../index.html'>Back to topics</a>