<a href='../index.html'>Back to topics</a><style> #notes_table {	font-family: arial, sans-serif; border-collapse: collapse;  width: 100%; background-color: #ffffff;	color:black;}#notes_table td, #notes_table th { text-align: left; padding: 8px; border: 1px solid #808080;}#notes_table tr:nth-child(even) {background-color: white;}#notes_table tr:hover {	background-color:  #ffffff;}#notes_table tr > th {	background: #f8f8f8; color: black;}</style><table  id='notes_table'><tr align= left><th>Use Case Scenario</th></ul></td></tr><td><ul><li>A company recently suffered a security incident that exposed customer personal information.This security incident has resulted in the loss of customers' confidential data and confidence. To address this scenario, the IT team has recommended implementing network virtual appliances (NVAs). You need to ensure traffic is properly routed through the virtual appliances. You're exploring other security options like service endpoints and private links.</li><tr align= left><th>System routes (how Azure implements them)</th></ul></td></tr><td><ul><li>Traffic between VM in same subnet</li><li>Traffic between VM in different subnet in the same vnet</li><li>Traffic from VM to the internet</li><li>A route table contains a set of rules (called routes) that specifies how packets should be routed in a virtual network.</li><li>Route tables record information about the system routes, where the tables are associated to subnets.</li><li>Each packet leaving a subnet is handled based on the associated route table.</li><li>Packets are matched to routes by using the destination. dest can be IP addr, vnet gateway, virtual applicance or internet</li><li>When a matching route can't be found, the packet is dropped.</li><tr align= left><th>Identify user-defined routes</th></ul></td></tr><td><ul><li>UDRs control network traffic by defining routes that specify the next hop of the traffic flow.</li><li>The next hop can be one of the following targets => Virtual network gateway, Virtual Network, Internet, NVA</li><li>Similar to system routes, UDRs also access route tables.</li><li>Each route table can be associated to multiple subnets.</li><li>Each subnet can be associated to one route table only.</li><li>There are no charges for creating route tables in Microsoft Azure.</li><tr align= left><th>Determine service endpoint uses</th></ul></td></tr><td><ul><li>A virtual network service endpoint provides the identity of your virtual network to the Azure service</li><li>Service endpoints can extend your virtual network identity to your Azure services to secure your service resources.</li><li>You secure your Azure service resources to your virtual network by using virtual network rules.</li><li>Virtual network rules can remove public internet access to resources, and allow traffic only from your virtual network.</li><li>Service endpoints always take service traffic directly from your virtual network to the service on the Microsoft Azure backbone network.</li><li>Service endpoints are configured through the subnet. No extra overhead is required to maintain the endpoints.</li><tr align= left><th>Things to consider when using service endpoints</th></ul></td></tr><td><ul><li>Consider improved security for resources</li><li>Consider optimal routing for service traffic.</li><li>Consider direct traffic to the Microsoft network.</li><li>Consider easy configuration and maintenance.</li><li>Imp Note below.</li><li>With service endpoints, the virtual machine IP addresses switch from public to private IPv4 addresses. Existing Azure service firewall rules that use Azure public IP addresses stop working after the switch</li><tr align= left><th>Determine service endpoint services</th></ul></td></tr><td><ul><li>It's easy to add a service endpoint to the virtual network. In the Azure portal, you select the Azure service for which to create the endpoint. In this unit, we examine several services, including Azure Cosmos DB, Event Hubs, Key Vault, and SQL Database.</li><tr align= left><th>Identify private link uses</th></ul></td></tr><td><ul><li>Azure Private Link provides private connectivity from a virtual network to Azure platform as a service (PaaS), customer-owned, or Microsoft partner services.</li><li>Azure Private Link keeps all traffic on the Microsoft global network. There's no public internet access.</li><li>Private Link is global and there are no regional restrictions. You can connect privately to services running in other Azure regions.</li><li>Services delivered on Azure can be brought into your private virtual network by mapping your network to a private endpoint.</li><li>Private Link can privately deliver your own services in your customer's virtual networks.</li><li>All traffic to the service can be routed through the private endpoint. No gateways, NAT devices, Azure ExpressRoute or VPN connections, or public IP addresses are required</li><tr align= left><th>Things to consider when using Azure Private Link</th></ul></td></tr><td><ul><li>Consider private connectivity to services on Azure.</li><li>Consider integration with on-premises and peered networks.</li><li>Consider protection against data exfiltration for Azure resources. Map private endpoints to Azure PaaS resources.</li><li>Consider services delivered directly to customer virtual networks. Send, approve, or reject requests directly without permissions or role-based access controls.</li><tr align= left><th>Excercises</th></ul></td></tr><td><ul><li>Complete Private Link tasks on your subscription</li><tr align= left><th>Check</th></ul></td></tr><td><ul><li>Which statement best describes Azure routing? When the next hop type is none, traffic is dropped.</li><li>What's a valid next hop type? Internet</li><li>How can you extend the company's private address space with direct connections to Azure resources? Virtual network endpoints</li><tr align= left><th>More</th></ul></td></tr><td><ul><li>https://learn.microsoft.com/en-us/training/modules/control-network-traffic-flow-with-routes/</li></table><a href='../index.html'>Back to topics</a>